# Repo Rules

## React 18 Rules (Official Docs Aligned)

- 함수형 컴포넌트와 Hooks만 사용한다. 클래스 컴포넌트는 사용하지 않는다.
- 컴포넌트와 Hook은 항상 순수하게 작성한다. 렌더링 중 부수효과를 만들지 않는다.
- 단방향 데이터 흐름을 지킨다. 상태는 필요한 가장 가까운 공통 부모로 올리고, props로 내려준다.
- 상태는 최소한으로 저장한다. 계산 가능한 값은 state로 중복 저장하지 않고 렌더 중 파생한다.
- state는 불변으로 다룬다. 객체/배열 업데이트 시 기존 값을 직접 변경하지 않는다.
- 리스트 렌더링 시 안정적인 `key`를 사용한다. 인덱스 `key`는 순서 변경 가능 목록에서 금지한다.
- state 보존/초기화 동작은 컴포넌트 위치와 `key`로 제어한다. 임시 리마운트 트릭은 지양한다.
- `useEffect`는 외부 시스템 동기화에만 사용한다. 외부 시스템이 없으면 Effect를 만들지 않는다.
- Effect는 항상 정리(cleanup) 가능하게 작성한다. 구독/타이머/이벤트는 해제 로직을 포함한다.
- Effect 의존성은 실제 참조값과 일치시킨다. 의존성 경고를 무시하거나 우회하지 않는다.
- 이벤트 로직은 이벤트 핸들러에 둔다. 사용자 액션 기반 로직을 Effect로 옮기지 않는다.
- `ref`는 DOM 접근, 포커스 제어, 외부 라이브러리 연동 같은 escape hatch 용도로만 사용한다.
- 성능 최적화는 측정 후 적용한다. `memo`, `useMemo`, `useCallback`은 필요가 입증된 경우에만 사용한다.
- 재사용 로직은 커스텀 Hook으로 분리한다. UI 구조와 비즈니스 로직을 과도하게 섞지 않는다.
- 폼은 제어 컴포넌트를 기본으로 한다. 입력값 단일 진실 공급원은 React state로 유지한다.
- 접근성을 기본 요건으로 본다. 시맨틱 태그, 키보드 조작, ARIA 속성을 누락하지 않는다.

## Repo Conventions

- 전역 클라이언트 상태는 기존 `Recoil`만 사용한다. 새 전역 상태 라이브러리 도입 금지.
- 서버 상태/비동기 캐싱은 기존 `react-query` 패턴을 따른다.
- 스타일링은 `@emotion/react`(`css`)를 기본으로 하고 인라인 스타일은 예외적으로만 허용한다.
- `any` 사용을 금지한다. props/state/API 경계 타입을 명시한다.
- 컴포넌트 파일명은 `PascalCase.tsx`를 사용한다.
- 의미 있는 UI 변경에는 테스트를 추가하거나 기존 테스트를 갱신한다.
- 기존 프로젝트 규칙과 충돌 시 개인 선호보다 레포 규칙을 우선한다.
